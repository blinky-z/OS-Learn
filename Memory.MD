Здесь конспектируются главы 4 и 5 - управление памятью (память, используемая процессами) и файловой системой.

## 1) В чем разница между virtual memory и virtual address space
**Virtual memory** - это память на стороннем хранилище, а не в main memory. Сторонняя память - это например remote хранилище, жёсткий диск и др. Виртуальная память позволяет расширить пространство под процессы, т.е. если какие-либо страницы памяти не могут полностью поместиться в главой памяти, то они хранятся в виртуальной памяти и подгружаются в оперативную память при необходимости (в момент погрузки этой страницы, если места все также нет, то их главной памяти выгрузится какая либо другая страницы, чтобы освободить место для подгружаемой страницы).

**Virtual address space** - это абстракция для управления памятью. Процессы, вместо того чтобы напрямую обращаться к физической памяти, работают с собственным адресным пространством, которое отражается системой на физическую память. Это позволяет защитить данные одного процесса от изменения другими процессами, а также не дать процессам испортить важные файлы, необходимые для работы самой системы.

**Например**, пусть процесс имеет адресное пространство, пронумерованное от 0 до 1024. Когда процесс обращается к адресу 560, система производит отражение этого адреса на физическую память и он превращается в физический адрес, который вычисляется так: смещение от начала физической памяти + виртуальный адрес. Например, пусть данный процесс был размещён после 4 процессов в памяти, тогда адрес превратится в: 4096 + 560 = 4656.

**Virtual Memory и Virtual Adress Space прямо связаны.** 

Дело в том, что не все данные могут поместиться в физической памяти, именно здесь и входит в работу Virtual memory, где будут храниться страницы памяти, которые не поместидись в физической памяти. У процессов все также существует свое собственное адресное пространство, но теперь система при отображении адреса проверяет также то, содержится ли необходимая страница в физической памяти или же в виртуальной памяти. Если страницы нет в физической памяти, то запускается алгоритм замещения страниц, необходимая страница загружается в физическую память, и система снова пытается отобразить виртуальный адрес на физический адрес. Без использования виртуального адресного пространства данный механизм не смог бы работать.

## 2) Файлы как абстракция управления памятью диска
**Файл** - это абстракция управления памятью диска. Процессы, вместо того, чтобы напрямую работать с физическими адресами хранилища, теперь работают с файлами. Файлы позволяют защитить данные одного пользователя операционной системы от изменения другими пользователями и предоставить более удобное управление памятью диска. Файлы можно читать и записывать, тем самым читая информационные блоки и записывая их.

## 3) Основные реализации организации файловой системы диска

### Непрерывное размещение
В такой реализации файлы представляют собой непрерывную последовательность блоков, каждый файл начинается с конца последнего записанного файла.

**Достоинства:**
- Простая реализация
- Высокая производительность, поскольку файл может быть считан единой операцией, установив позицию на начало первого блока, а кол-во блоков уже известно.

**Недостатки:**
- Постепенная фрагментация диска. При удалении файлов остаются свободные блоки фиксированных разделов, и может возникнуть такая ситуация, когда создаваемый файл может просто не поместиться никуда, и тем более не сможет расти динамически.

### Размещение с использованием связанного списка
В такой реализации файлы представляют собой связзаный список дисковых блоков. Каждый блок хранит указатель на следующий блок, или же используется таблица размещения файлов, которая хранится в памяти. 

**Связанные списки блоков имеют два недостатка:**
- Сложен произвольный доступ (в обычной реализации, чтобы обратиться к блоку n, надо пройти n - 1 предшествующих ему блоков)
- Указатель на следующий блок занимает место в блоке, за счёт чего осложняется чтение целых блоков, так как информация в блоке становится не кратной двум, а именно такие размеры читаются всеми программами. Для того, чтобы прочитать целый блок, придётся брать информацию из следующего блока, что замедляет чтение.

**Использование таблицы размещения файлов**
**FAT (File Allocation Table)** позволяет решить недостатки связанных списков блоков. 
Такая таблица хранится в *оперативной памяти*, поэтому позволяет более эффективно производить произвольный доступ, так как для того, чтобы получить номер следующего блока, не требуется обращаться к *диску* (ранее указатели хранились в блоках на диске). Обращение к оперативной памяти всегда быстрее, чем к диску. Также, теперь размер блоков становится кратным 2, и чтение блоков также становиться эффективнее. 

